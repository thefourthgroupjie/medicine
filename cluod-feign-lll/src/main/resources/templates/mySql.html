<!DOCTYPE html>
<!-- saved from url=(0051)http://www.xb1y.com/index.php/Home/Board/index.html -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- 引入easyui样式文件 -->
    <link type="text/css" rel="stylesheet" href="../js/jquery-easyui-1.5/themes/default/easyui.css">
    <!-- 引入easyui图标样式文件 -->
    <link type="text/css" rel="stylesheet" href="../js/jquery-easyui-1.5/themes/icon.css">
    <!-- 引入jquery js文件 -->
    <script type="text/javascript" src="../js/jquery-easyui-1.5/jquery.min.js"></script>
    <!-- 引入easyui的js文件 -->
    <script type="text/javascript" src="../js/jquery-easyui-1.5/jquery.easyui.min.js"></script>
    <!-- 引文easyui支持中文js -->
    <script type="text/javascript" src="../js/jquery-easyui-1.5/locale/easyui-lang-zh_CN.js"></script>


    <script type="text/javascript" src="../js/jquery-easyui-1.5/util-js.js"></script>


    <title>Insert title here</title>
</head>
<style type="text/css">
    .sendP{
        text-align: right;
    }
    .sendCen{
        background-color: green;
        color: white;
        font-size: 24px;
        padding: 2px 5px;
        border-radius: 8px;
    }
    .sendIcon{
        color: green;
        margin-left: -5px;
    }
    .reveiceIcon{
        color: blue;
        margin-right: -5px;
    }
    .reveiceCen{
        background-color: blue;
        color: white;
        font-size: 24px;
        padding: 2px 5px;
        border-radius: 8px;
    }
</style>
<body>

<div class="easyui-layout" data-options="fit:true" >
    <div data-options="region:'north'" style="height:80%" id="content">


    </div>
    <div data-options="region:'center'" style="text-align: center;">
        <input type="text"  class="easyui-textbox"  id="msg" />
        <a onclick="sendMsg()" class="easyui-linkbutton" data-options="iconCls:'icon-ok'" id="sendMsg">发送</a>
    </div>
</div>
</body>
<script type="text/javascript" >


    var a ='';
    function sendMsg(){
        var msg = $("#msg").textbox("getValue");
        //发送的消息
        var send = '<p class="sendP"><span class="sendCen">'+msg+'</span><span class="sendIcon">▶</span></p>';
        $("#content").append(send);
        //清除输入框
        $("#msg").textbox("setValue","");
        //设置滚动条
        $("#content").scrollTop($("#content")[0].scrollHeight);
        $.ajax({
            url:"/main/testGet",
            type:"post",
            data:{msg:msg},
            dataType:'json',
            success:function(data){
                //接受的消息.
                var reveice = '<p><span class="reveiceIcon"><font size="4">菲菲：</font></span><span class="reveiceCen">'+data+'</span></p>';
                //接受的消息.
                $("#content").append(reveice);
                //设置滚动条高度
                $("#content").scrollTop($("#content")[0].scrollHeight);

            }
        })
    }
    $(function(){
        initKeyDown();
    })

    function initKeyDown() {
        $('#msg').textbox('textbox').bind('keydown', function(e){
            if (e.keyCode == 8){	// 当按下回车键时接受输入的值。
                sendMsg();

            }
        });
    }
</script>
</html>